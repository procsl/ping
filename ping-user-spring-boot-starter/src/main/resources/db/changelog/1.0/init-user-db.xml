<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="create_user_table" author="user_module">
        <createTable tableName="u_role" remarks="RBAC模块角色表">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="name" type="varchar(20)" remarks="角色名称">
                <constraints nullable="false" unique="true" uniqueConstraintName="u_uk_role_name"/>
            </column>
        </createTable>

        <createTable tableName="u_role_permission" remarks="RBAC模块权限表">
            <column name="role_id" type="bigint">
                <constraints references="u_role(id)" foreignKeyName="u_fk_role_id" referencedTableName="u_role"
                             referencedColumnNames="id"/>
            </column>
            <column name="name" type="varchar(128)" remarks="权限名称"/>
        </createTable>

        <createTable tableName="u_account" remarks="用户账户表">
            <column name="id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="user_id" type="bigint">
                <!-- TODO 创建索引-->
            </column>

            <column name="name" type="varchar(15)" remarks="用户账户名">
                <constraints nullable="false" unique="true" uniqueConstraintName="u_uk_account_name"/>
            </column>

            <column name="password" type="varchar(40)" remarks="用户密码"/>

            <column name="created_by" type="bigint" remarks="创建人">
                <constraints nullable="false"/>
            </column>
            <column name="created_date" type="datetime" remarks="创建时间">
                <constraints nullable="false"/>
            </column>

            <column name="last_modified_by" type="bigint" remarks="最后修改人">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_date" type="datetime" remarks="最后修改时间">
                <constraints nullable="false"/>
            </column>

        </createTable>

        <createTable tableName="u_user">
            <column name="id" type="bigint">
                <constraints primaryKey="true"/>
            </column>

            <column name="name" type="varchar(15)" remarks="用户姓名">
                <constraints nullable="false" unique="true" uniqueConstraintName="u_uk_user_name"/>
            </column>

            <column name="gender" type="varchar(5)" remarks="用户性别: 男, 女, 未知"/>

            <column name="remark" type="varchar(500)" remarks="用户签名"/>

            <column name="created_by" type="bigint" remarks="创建人">
                <constraints nullable="false"/>
            </column>
            <column name="created_date" type="datetime" remarks="创建时间">
                <constraints nullable="false"/>
            </column>

            <column name="last_modified_by" type="bigint" remarks="最后修改人">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_date" type="datetime" remarks="最后修改时间">
                <constraints nullable="false"/>
            </column>

        </createTable>

        <createTable tableName="u_subject" remarks="主体表">
            <column name="id">
                <constraints primaryKey="true"/>
            </column>
            <column name="type" remarks="主体类型:user">
                <constraints nullable="false"/>
            </column>
            <column name="subject_id" remarks="主体">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="u_subject_roles" remarks="主体角色关联表">
            <column name="subject_id" remarks="主体ID">
                <constraints nullable="false"/>
            </column>
            <column name="roles_id" remarks="角色ID">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="u_configure" remarks="系统信息配置表">
            <column name="id">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="varchar(20)" remarks="配置项名称">
                <constraints unique="true" uniqueConstraintName="u_uk_configure" nullable="false"/>
            </column>
            <column name="config_text" type="varchar(100)" remarks="配置项内容"/>
            <column name="description" type="varchar(500)" remarks="配置项描述"/>
        </createTable>

    </changeSet>


</databaseChangeLog>
